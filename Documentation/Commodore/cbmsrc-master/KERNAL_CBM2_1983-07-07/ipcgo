.SKI 5
; IPCGO - FREE BUS, INTERRUPT 2ND PROCESSOR
;         GO INTO A LOOP, WAITING FOR REQUESTS.
;
IPCGO	LDX #$FF
	STX I6509       ;INDIRECTS TO BANK F ONLY
	LDA TPI1+PB     ;TPI1 PB4:=0 FREES DBUS
	AND #$EF
	STA TPI1+PB
	NOP             ;A PAUSE
	LDA IPCIA+PRB   ;CHECK NBUSY1
	ROR A
	BCS *+5
	JMP ERROPR      ;BUS NOT FREED, ERROR...
;
	LDA #0          ;PB6 LO->HI IN 4US...
	SEI
	STA IPCIA+PRB   ;INTERRUPT 2ND PROCESSEOR
	LDA #$40        ;2 CYCLES (4US=8CYCLES)
	NOP
	NOP
	NOP
	NOP             ;8 CYCLES OF GARB. 5US SAFER THAN 4!
	STA IPCIA+PRB   ;TURN PB6 BACK ON
	CLI
IPLOOP	JMP IPLOOP      ;SIT DOWN
.END
